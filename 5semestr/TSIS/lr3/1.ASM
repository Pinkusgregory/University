init:

        mvi c, 10                       ; ?????? ????????  ???????

        mvi e, 00                       ; ?????? ????????? ???????

        lxi h, 0900                     ; ??????? ????? ???????? ???????

        jmp start_element       

start_element:

        mov b, m                        ; ????????? ??????? ??????? ? ??????? b

        mvi d, 00                       ; ???????? ??????? d

count_ones:

        mov a, b                        ; ????????? ???????? ???????? b ? ??????? a

        ani 01                          ; ?????????, ????? ?? ? ??????? ??????? ???????

        jz shift_element        ; ???? ? ??????? ??????? ?? ???????

        inr d                           ; ????????? ??????? d

        mvi a, 04                       ; ???????? ? ??????? a 04

        cmp d                           ; ???????? ???????? a ? d

        jz push_to_array        ; ???? ?????, ?? ??????? ? ???????? ??????

shift_element:

        mov a, b                        ; ????????? ???????? ???????? b ? ??????? a

        rar                                     ; ???????? ???????? ???????? a ??????

        mov b, a                        ; ????????? ???????? ???????? a ? ??????? b

        mvi a, 00                       ; ???????? ? ??????? a 00

        cmp b                           ; ???????? ???????? a ? b

        jnz count_ones          ; ???? ?? ?????, ?? ?????????? ??????? ??????

next_element:

        inr l                           ; ???????????????? ??????? l

        dcr c                           ; ???????????????? ??????? c

        jnz start_element       ; ???? ??????? c ?? ?????? ????, ?? ?????????? ???????? ?????????

        hlt                                     ; ????????? ??????

push_to_array:

        mov b, m                        ; ???????? ??????? ??????? ? ??????? b

        mvi h, 0A                       ; ??????????? ????????? ???????? ?????? ??????? ?? ??????? ????? ????????? ???????

        mov d, l                        ; ????????? ???????? ???????? l ? ??????? d

        mov l, e                        ; ????????? ???????? ???????? e ? ??????? l

        mov m, b                        ; ????????? ???????? ???????? b ? ???????

        inr e                           ; ???????????????? ?????????? ????????? ????????? ??????

        mov l, d                        ; ????????? ???????? ???????? d ? ??????? l

        mvi h, 09                       ; ??????????? ????????? ???????? ?????? ??????? ?? ??????? ????? ???????? ???????

        jmp next_element        ; ??????? ? ?????????? ????????